##  Вопросы к экзамену

1. Напишите определения базы данных, типа данных, домена, кортежа, отношения, целостности базы данных. Приведите пример отношения, на котором укажите атрибуты, кортежи, домены, типы данных.

2. Дайте определение реляционной модели данных и ее аспектам. Перечислите операции реляционной алгебры с примерами.

3. Напишите определения потенциального ключа и требований, которым он должен удовлетворять. Дайте определения первичному, альтернативному и суррогатному ключу. Приведите примеры отношений с естественным первичным ключом и суррогатным первичным ключом; для каждого из отношений укажите альтернативные ключи.

4. Перечислите основные числовые, строковые, бинарные, календарные типы данных в PostgreSQL с указанием объема занимаемой памяти и диапазона допустимых значений. Напишите особенности значения NULL. 

5. Для версионирования схемы БД наиболее широко используются следующие подходы: метод генерации на базе исходного кода, метод инкрементальных изменений и метод идемпотентных изменений. Напишите, в чем заключаются эти подходы к версионированию, а также перечислите их плюсы и минусы.

6. Что называется проектированием баз данных? Укажите его основные задачи. Дайте определение этапам проектирования с указанием последовательности их выполнения. Перечислите возможные при плохом проектировании аномалии БД с примерами. 

7. Что такое нормальная форма? Дайте определения первой, второй, третьей и четвертой нормальным формам. Для каждой НФ приведите пример отношения, которое не удовлетворяет ее условиям, после чего предложите способ приведения данного отношения к этой НФ.

8. Перечислите возможные виды связи (ссылок друг на друга) между таблицами БД. Приведите примеры для каждого вида связи.

9. Какие ограничения могут накладываться на таблицы БД? Для каждого ограничения укажите, что оно значит, и приведите пример ситуации, когда оно может быть полезно. Перечислите все возможные действия (action) со значениями аттрибутов-ссылок при обновлении/удалении родительского кортежа.

10. Перечислите известные вам методы хранения иерархических конструкций. Для каждого из них нарисуйте граф хотя бы из трех уровней, укажите способ обхода; перечислите сильные и слабые стороны.

11. Перечислите используемые в PostgreSQL подходы для сортировки и регистронезависимого поиска, укажите их слабые стороны.

12. Перечислите известные вам оконные функции в PostgreSQL с описанием и примерами применения.

13. Приведите примеры коррелирующего и некоррелируюшего подзапросов. Сколько раз они выполняются? Расположите по скорости выполнения реализации одного и того же запроса с использованием коррелирующего подзапроса, некоррелирующего подзапроса и соединения посредством JOIN. Перечислите известные вам виды JOIN-ов с кратким описанием того, что они делают. На языке SQL с помощью JOIN выразите следующие операции реляционной алгебры над отношениями A и B:

    Пересечение (А и В);
    Объединение (А или В);
    Разность (А без В);
    Симметрическая разность ((А или В) без (А и В)).

14. Дайте определение представления (VIEW). Напишите его основные особенности, преимущества и ограничения. Перечислите, каким условиям должно удовлетворять представление, чтобы быть изменяемым. Приведите пример случая, когда создание представления может быть удобно, и пример кода для создания представления.

15. Что такое ACID? Дайте опеределение каждому принципу из этой аббревиатуры.

16. Напишите, в чем заключается журнализация изменений, какие данные содержит журнал транзакций и по какому алгоритму работает журнализация.

17. Какие преимущества дает MVCC (MultiVersion Concurrency Control) с точки зрения изолированности транзакций? Приведите пошаговые примеры обновления, добавления и удаления данных из таблицы при MVCC.

18. Перечислите уровни изолированности транзакций и соответствующие каждому из них возможные аномалии (с определением). Для каждой из этих аномалий приведите примеры проблемных транзакций.

19. Перечислите плюсы и минусы хранимых процедур. Приведите пример команды для создания хранимой процедуры (функции) и пример команды для её вызова. Чем хранимая процедура отличается от триггера?

20. Напишите алгоритм выполнения распределенной транзакции в PostgreSQL. Перечислите плюсы и минусы распределенных транзакций.

21. Для чего используются персистентные очереди? Перечислите плюсы и минусы персистентных очередей.

22. Какие преимущества дает использование индексов? Перечислите известные вам виды индексов в PostgreSQL с описанием их особенностей. Приведите примеры графов индексов для btree и GiST (R-Tree), примеры таблиц для hash-индексов и битовых масок. Какую цену приходится платить за использование индексов? 

23. На примерах запросов покажите, как изменяется стратегия выполнения простого запроса, запроса с условием, запроса с сортировкой после создания индексов. 

24. Что представляет собой протоколирование запросов? На какие запросы надо обращать внимание в первую очередь при протоколировании?

25. Для чего используется EXPLAIN? Перечислите его особенности и недостатки. Приведите пример. Укажите, на что следует обратить внимание в первую очерель при использовании EXPLAIN. Чем отличаются EXPLAIN и EXPLAIN ANALYZE?

26. Перечислите плюсы работы с нормализованными таблицами. Дайте определение денормализации. Какие подходы могут использоваться для поддержания денормализованных данных в актуальном состоянии?

27. Перечислите известные вам частные случаи, когда становится возможна оптимизация DELETE, COUNT, LIMIT. Приведите примеры оптимизированных запросов.

28. Дайте определение способам организации работы БД при работе с актуальными и историческими данными. Перечислите особенности работы с актуальными и историческими данными.

29. Что такое секционирование (partitioning)? Напишите особенности секционирования в старых версиях PostgreSQL с использованием наследования или с использованием расширения pg_pathman и в PostgreSQL 10. Приведите пример секционирования таблицы для PostgreSQL 10.

30. Какие подходы используются для уменьшения времени блокировок при оптимизации на уровне приложения? Как работает оптимистическая блокировка? Приведите примеры оптимистичной и пессимистичной блокировок. Приведите примеры срочного запроса и неблокирующего создания индекса.

31. Для каких целей может использоваться репликация? Приведите основные варианты взаимодействия серверов при репликации. Перечилите варианты реализации репликации и гарантии репликации. Укажите общие принципы, плюсы и минусы физической и логической репликации в PostgreSQL.

32. Перечислите этапы предварительной подготовки документов для полнотекстового поиска. Что позволяет делать PostgreSQL при использовании словарей для полнотекстового поиска? Приведите примеры подключения и использования словаря.

33. Какой пакет необходимо установить для работы с географическими данными в PostgreSQL? Приведите пример запроса для определения расстояния между двумя точками на сфероиде.

34. Для чего производится резервное копирование? Перечислите особенности логических и физических резервных копий. Укажите плюсы и минусы создания: а.) физической резервной копии с pg_basebackup; б.) логической резервной копии с pg_dump/pg_dumpall. Приведите примеры команд для создания резервных копий этими способами.

35. Какие файлы содержат настройки конфигурации PostgreSQL и за что отвечает каждый из них? Перечислите основные параметры конфигурации использования памяти в PostgreSQL. Укажиет, какие таблицы PostgreSQL можно посмотреть для мониторинга поведения СУБД (таблица - что по ней можно посмотреть). Перечислите известные вам термины реализации безопасности в СУБД и их функции. Объясните, что такое SQL-injection и приведите пример.

36. Перечислите ключевые особенности архитектуры MySQL. Укажите типы подсистем хранения в MySQL с их особенностями. Чем интересны реализации DDL и ALTER TABLE в MySQL? Перечислите известные вам режимы репликации в MySQL и основные проблемы реализации репликации в MySQL.

37. Перечислите общие характеристики, чаще всего присущие NoSQL БД. Укажите плюсы и минусы для нормализованных данных и для данных в виде агрегатов. Приведите пример как некоторая реляционная модель может быть представлена в виде агрегатов. 

38. Перечислите известные вам типы NoSQL БД с их основными особенностями и примерами БД этих типов. 

